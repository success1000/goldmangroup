/*jquery.als v.1.5 | (c) 2012, 2014 Federica Sibella musings(at)musings(dot)it | http://www.musings.it | MIT or GPLv3 license.*/
!function(e){function t(e){if("string"==typeof e){var t=e.indexOf("_");-1!=t&&(e=e.substr(t+1))}return e}function i(i){i.preventDefault();var o=t(e(this).attr("data-id")),r=n[o];e(this).off(),r.prev.off(),r.viewport.off("touchend"),e.fn.als("next",o)}function o(i){i.preventDefault();var o=t(e(this).attr("data-id")),r=n[o];e(this).off(),r.next.off(),r.viewport.off("touchend"),e.fn.als("prev",o)}var n=[],s=0,a={init:function(t){this.each(function(){var a={visible_items:3,scrolling_items:1,orientation:"horizontal",circular:"no",autoscroll:"no",interval:4e3,speed:600,easing:"swing",direction:"left",start_from:0},c=e(this),l=c.data("als"),d=e(),m=e(),u=e(),p=e(),h=e(),g=e(),v=0,f=0,T=0,w=0,_=0,k=0,x=0,y=0,b=0,E=0,q=0,H=0,W={};switch(W.swipeTreshold=100,W.allowedTime=300,d=e.extend(a,t),"no"==d.circular&&"yes"==d.autoscroll&&(d.circular="yes"),("linear"!=d.easing||"swing"!=d.easing)&&(d.easing="swing"),c.attr("id")&&""!=c.attr("id")||c.attr("id","als-container_"+s),c.attr("data-id","als-container_"+s),p=c.find(".als-viewport").attr("id","als-viewport_"+s),u=c.find(".als-wrapper").attr("id","als-wrapper_"+s),m=c.find(".als-item"),v=m.size(),d.visible_items>v&&(d.visible_items=v-1),d.scrolling_items>d.visible_items&&(d.scrolling_items=d.visible_items-1),d.start_from>v-d.visible_items&&(d.start_from=0),h=c.find(".als-prev").attr("data-id","als-prev_"+s),g=c.find(".als-next").attr("data-id","als-next_"+s),d.orientation){case"horizontal":default:if(m.each(function(t){e(this).attr("id","als-item_"+s+"_"+t),T+=e(this).outerWidth(!0),e(this).outerHeight(!0)>x&&(x=e(this).outerHeight(!0)),b<d.visible_items&&(0==d.start_from?(f+=e(this).outerWidth(!0),b++):t>=d.start_from&&(f+=e(this).outerWidth(!0),b++)),0!=d.start_from&&(E<d.start_from&&(k+=e(this).outerWidth(!0),E++),q=d.start_from)}),u.css("width",T),m.css("left",-k),p.css("width",f),u.css("height",x),p.css("height",x),"yes"==d.circular&&0!=d.start_from)for(r=0;r<d.start_from;r++){var z=m.last().position(),D=z.left+m.last().outerWidth(!0);m.eq(r).css("left",D)}break;case"vertical":if(m.each(function(t){e(this).attr("id","als-item_"+s+"_"+t),_+=e(this).outerHeight(!0),e(this).outerWidth(!0)>y&&(y=e(this).outerWidth(!0)),b<d.visible_items&&(0==d.start_from?(w+=e(this).outerHeight(!0),b++):t>=d.start_from&&(w+=e(this).outerHeight(!0),b++)),0!=d.start_from&&(E<d.start_from&&(k+=e(this).outerHeight(!0),E++),q=d.start_from)}),u.css("height",_),m.css("top",-k),p.css("height",w),u.css("width",y),p.css("width",y),"yes"==d.circular&&0!=d.start_from)for(r=0;r<d.start_from;r++){var z=m.last().position(),X=z.top+m.last().outerHeight(!0);m.eq(r).css("top",X)}}return"no"==d.circular&&(0==d.start_from&&h.css("display","none"),d.visible_items+d.start_from==v&&g.css("display","none")),g.on("click touchstart touchend",i),h.on("click touchstart touchend",o),p.on("touchstart",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];W.ox=t.pageX,W.oy=t.pageY,W.startTime=(new Date).getTime()}),p.on("touchmove",function(){}),p.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];W.dx=t.pageX-W.ox,W.dy=t.pageY-W.oy,W.endTime=(new Date).getTime()-W.startTime,"horizontal"==d.orientation?W.dx<-W.swipeTreshold&&W.endTime<W.allowedTime?g.trigger("click"):W.dx>W.swipeTreshold&&W.endTime<W.allowedTime&&h.trigger("click"):W.dy<-W.swipeTreshold&&W.endTime<W.allowedTime?g.trigger("click"):W.dy>W.swipeTreshold&&W.endTime<W.allowedTime&&h.trigger("click")}),c.data("als",{container:c,instance:s,options:d,viewport:p,wrapper:u,prev:h,next:g,item:m,num_items:v,wrapper_width:T,viewport_width:f,wrapper_height:_,viewport_height:w,current:q,timer:H,mm:W}),l=c.data("als"),n[s]=l,"yes"==d.autoscroll?(e.fn.als("start",s),u.hover(function(){e.fn.als("stop",e(this).attr("id"))},function(){e.fn.als("start",e(this).attr("id"))})):"no"==d.autoscroll&&e.fn.als("stop",s),s++,n})},next:function(e){e=t(e);var r=n[e],s=r.mm,a=0,c=0;switch(r.options.orientation){case"horizontal":default:var l=0,d=0;switch(r.options.circular){case"no":default:for(a=r.current;a<r.current+r.options.scrolling_items;a++)l+=r.item.eq(a).outerWidth(!0);for(r.current+=r.options.scrolling_items,c=r.current;c<r.current+r.options.visible_items;c++)d+=r.item.eq(c).outerWidth(!0);r.viewport.animate({width:d},r.options.speed,r.options.easing),r.item.animate({left:"-="+l},r.options.speed,r.options.easing),r.item.promise().done(function(){r.next.on("click touchstart touchend",i),r.prev.on("click touchstart touchend",o),r.viewport.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s.dx=t.pageX-s.ox,s.dy=t.pageY-s.oy,s.endTime=(new Date).getTime()-s.startTime,"horizontal"==r.options.orientation?s.dx<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dx>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click"):s.dy<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dy>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click")})}),r.current>0&&r.prev.show(),r.current+r.options.visible_items>=r.num_items&&r.next.hide();break;case"yes":var m=0,u=[];for(a=r.current;a<r.current+r.options.scrolling_items;a++){var p=a;a>=r.num_items&&(p=a-r.num_items),l+=r.item.eq(p).outerWidth(!0),u[m]=p,m++}for(r.current+=r.options.scrolling_items,r.current>=r.num_items&&(r.current-=r.num_items),c=r.current;c<r.current+r.options.visible_items;c++){var h=c;c>=r.num_items&&(h=c-r.num_items),d+=r.item.eq(h).outerWidth(!0)}r.viewport.animate({width:d},r.options.speed,r.options.easing),r.item.animate({left:"-="+l},r.options.speed,r.options.easing),r.item.promise().done(function(){var e=r.item.last().position(),t=e.left+r.item.last().outerWidth(!0);for(k5=0;k5<u.length;k5++){if(0==u[k5])var e=r.item.last().position(),t=e.left+r.item.last().outerWidth(!0);r.item.eq(u[k5]).css("left",t)}r.next.on("click touchstart touchend",i),r.prev.on("click touchstart touchend",o),r.viewport.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s.dx=t.pageX-s.ox,s.dy=t.pageY-s.oy,s.endTime=(new Date).getTime()-s.startTime,"horizontal"==r.options.orientation?s.dx<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dx>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click"):s.dy<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dy>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click")})})}break;case"vertical":var g=0,v=0;switch(r.options.circular){case"no":default:for(a=r.current;a<r.current+r.options.scrolling_items;a++)g+=r.item.eq(a).outerHeight(!0);for(r.current+=r.options.scrolling_items,c=r.current;c<r.current+r.options.visible_items;c++)v+=r.item.eq(c).outerHeight(!0);r.viewport.animate({height:v},r.options.speed,r.options.easing),r.item.animate({top:"-="+g},r.options.speed,r.options.easing),r.item.promise().done(function(){r.next.on("click touchstart touchend",i),r.prev.on("click touchstart touchend",o),r.viewport.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s.dx=t.pageX-s.ox,s.dy=t.pageY-s.oy,s.endTime=(new Date).getTime()-s.startTime,"horizontal"==r.options.orientation?s.dx<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dx>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click"):s.dy<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dy>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click")})}),r.current>0&&r.prev.show(),r.current+r.options.visible_items>=r.num_items&&r.next.hide();break;case"yes":var m=0,u=[];for(a=r.current;a<r.current+r.options.scrolling_items;a++){var p=a;a>=r.num_items&&(p=a-r.num_items),g+=r.item.eq(p).outerHeight(!0),u[m]=p,m++}for(r.current+=r.options.scrolling_items,r.current>=r.num_items&&(r.current-=r.num_items),c=r.current;c<r.current+r.options.visible_items;c++){var h=c;c>=r.num_items&&(h=c-r.num_items),v+=r.item.eq(h).outerHeight(!0)}r.viewport.animate({height:v}),r.item.animate({top:"-="+g}),r.item.promise().done(function(){var e=r.item.last().position(),t=e.top+r.item.last().outerHeight(!0);for(k5=0;k5<u.length;k5++){if(0==u[k5])var e=r.item.last().position(),t=e.top+r.item.last().outerHeight(!0);r.item.eq(u[k5]).css("top",t)}r.next.on("click touchstart touchend",i),r.prev.on("click touchstart touchend",o),r.viewport.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s.dx=t.pageX-s.ox,s.dy=t.pageY-s.oy,s.endTime=(new Date).getTime()-s.startTime,"horizontal"==r.options.orientation?s.dx<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dx>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click"):s.dy<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dy>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click")})})}}return n[e]=r,n},prev:function(e){e=t(e);var r=n[e],s=r.mm,a=0,c=0;switch(r.options.orientation){case"horizontal":default:var l=0,d=0;switch(r.options.circular){case"no":default:for(r.current-=r.options.scrolling_items,a=r.current;a<r.current+r.options.scrolling_items;a++)l+=r.item.eq(a).outerWidth(!0);for(c=r.current;c<r.current+r.options.visible_items;c++)d+=r.item.eq(c).outerWidth(!0);r.viewport.animate({width:d}),r.item.animate({left:"+="+l},r.options.speed,r.options.easing),r.item.promise().done(function(){r.next.on("click touchstart touchend",i),r.prev.on("click touchstart touchend",o),r.viewport.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s.dx=t.pageX-s.ox,s.dy=t.pageY-s.oy,s.endTime=(new Date).getTime()-s.startTime,"horizontal"==r.options.orientation?s.dx<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dx>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click"):s.dy<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dy>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click")})}),r.current<=0&&r.prev.hide(),r.current+r.options.visible_items<r.num_items&&r.next.show();break;case"yes":var m=0,u=[];for(r.current-=r.options.scrolling_items,r.current<0&&(r.current+=r.num_items),a=r.current;a<r.current+r.options.scrolling_items;a++){var p=a;a>=r.num_items&&(p=a-r.num_items),l+=r.item.eq(p).outerWidth(!0),u[m]=p,m++}for(c=r.current;c<r.current+r.options.visible_items;c++){var h=c;c>=r.num_items&&(h=c-r.num_items),d+=r.item.eq(h).outerWidth(!0)}var g=r.item.first().position(),v=g.left-r.wrapper_width;for(k5=0;k5<u.length;k5++)if(r.item.eq(u[k5]).css("left",v),0==u[k5]){var f=r.item.eq(0).position(),T=f.left-r.wrapper_width;for(k6=0;k5>k6;k6++)r.item.eq(u[k6]).css("left",T)}setTimeout(function(){r.viewport.animate({width:d}),r.item.animate({left:"+="+l},r.options.speed,r.options.easing),r.item.promise().done(function(){r.next.on("click touchstart touchend",i),r.prev.on("click touchstart touchend",o),r.viewport.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s.dx=t.pageX-s.ox,s.dy=t.pageY-s.oy,s.endTime=(new Date).getTime()-s.startTime,"horizontal"==r.options.orientation?s.dx<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dx>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click"):s.dy<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dy>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click")})})},200)}break;case"vertical":var w=0,_=0;switch(r.options.circular){case"no":default:for(r.current-=r.options.scrolling_items,a=r.current;a<r.current+r.options.scrolling_items;a++)w+=r.item.eq(a).outerHeight(!0);for(c=r.current;c<r.current+r.options.visible_items;c++)_+=r.item.eq(c).outerHeight(!0);r.viewport.animate({height:_}),r.item.animate({top:"+="+w},r.options.speed,r.options.easing),r.item.promise().done(function(){r.next.on("click touchstart touchend",i),r.prev.on("click touchstart touchend",o),r.viewport.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s.dx=t.pageX-s.ox,s.dy=t.pageY-s.oy,s.endTime=(new Date).getTime()-s.startTime,"horizontal"==r.options.orientation?s.dx<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dx>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click"):s.dy<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dy>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click")})}),r.current<=0&&r.prev.hide(),r.current+r.options.visible_items<r.num_items&&r.next.show();break;case"yes":var m=0,u=[];for(r.current-=r.options.scrolling_items,r.current<0&&(r.current+=r.num_items),a=r.current;a<r.current+r.options.scrolling_items;a++){var p=a;a>=r.num_items&&(p=a-r.num_items),w+=r.item.eq(p).outerHeight(!0),u[m]=p,m++}for(c=r.current;c<r.current+r.options.visible_items;c++){var h=c;c>=r.num_items&&(h=c-r.num_items),_+=r.item.eq(h).outerHeight(!0)}var g=r.item.first().position(),k=g.top-r.wrapper_height;for(k5=0;k5<u.length;k5++)if(r.item.eq(u[k5]).css("top",k),0==u[k5]){var f=r.item.eq(0).position(),x=f.top-r.wrapper_height;for(k6=0;k5>k6;k6++)r.item.eq(u[k6]).css("top",x)}setTimeout(function(){r.viewport.animate({height:_},r.options.speed,r.options.easing),r.item.animate({top:"+="+w},r.options.speed,r.options.easing),r.item.promise().done(function(){r.next.on("click touchstart touchend",i),r.prev.on("click touchstart touchend",o),r.viewport.on("touchend",function(e){if(void 0==e.originalEvent.touches)var t=e;else var t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];s.dx=t.pageX-s.ox,s.dy=t.pageY-s.oy,s.endTime=(new Date).getTime()-s.startTime,"horizontal"==r.options.orientation?s.dx<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dx>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click"):s.dy<-s.swipeTreshold&&s.endTime<s.allowedTime?r.next.trigger("click"):s.dy>s.swipeTreshold&&s.endTime<s.allowedTime&&r.prev.trigger("click")})})},200)}}return n[e]=r,n},start:function(i){i=t(i);var o=n[i];switch(0!=o.timer&&clearInterval(o.timer),o.options.direction){case"left":case"up":default:o.timer=setInterval(function(){o.next.off(),o.prev.off(),o.viewport.off("touchend"),e.fn.als("next",i)},o.options.interval);break;case"right":case"down":o.timer=setInterval(function(){o.prev.off(),o.next.off(),o.viewport.off("touchend"),e.fn.als("prev",i)},o.options.interval)}return n[i]=o,n},stop:function(e){e=t(e);var i=n[e];return clearInterval(i.timer),n[e]=i,n},destroy:function(){id=t(e(this).attr("data-id"));var i=n[id];i.prev.off(),i.next.off(),i.viewport.off(),e.fn.als("stop",id),e.removeData(i,"als"),this.unbind(),this.element=null}};e.fn.als=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.als"):a.init.apply(this,arguments)}}(jQuery);